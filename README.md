# Проектная работа "Веб-ларек"

__Стек:__ HTML, SCSS, TS, Webpack
__Паттерн проектирования__ — Событийно-ориентированная архитектура

#### Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/model — модели проекта
- src/components/view — представления проекта
- src/components/base/ — папка с базовым кодом

#### Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения и хендлеры событий
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

#### Событийная модель:
- src/index.ts — содержит хендлеры, которые реагируют на изменения на сайте и в сущности

#### Использование принципа ООП "полиморфизм" в виде интерфейса:
- Сyщности CartItemView, CartView, CatalogItemView, CatalogProductView, CatalogView, ContactsDetailsView, PaymentDetailsView, SuccessfulSendingView, ModalView реализует интерфейс IView
- Сущность Order реализует интерфейс IOrder

#### Описание событий:
- Перечисление ViewEvents содержит события, которые вызываются во View
  - UiCatalogItemAddToCartEvent — вызывается в CatalogProductView при нажатии на кнопку добавления в корзину,
  - UiCatalogItemOpenEvent — вызывается в CatalogItemView событие чтобы в дальнейшем отобразить модальное окно с деталями товара,
  - UiOrderContactsDetailsFilled — вызывается в ContactsDetailsView при отправке формы с данными,
  - UiOrderPaymentDetailsFilled — вызывается в PaymentDetailsView при отправке формы с данными,
  - UiCartItemRemove — вызывается в PaymentDetailsView при удалении из корзины продукта, 
  - UiOnOrder — вызывается в CartView при нажатии на кнопку заказать в корзине,
  - UiContactsDetailsCleared — вызывается в ContactsDetailsView при очищении инпутов,
  - UiPaymentDetailsCleared — вызывается в PaymentDetailsView при очищении инпута, 
  - UiOrderOpenContactsDetails — вызывается в PaymentDetailsView при нажатии на кнопку submit, 
  - UiOrderOpenSuccessfulModal — вызывается в ContactsDetailsView при нажатии на кнопку submit,
  - UiModalClose — вызывается в ModalView и в SuccessfulSendingView пр закрытии модального окна ,


- Перечисление ModelEvents содержит события, которые вызываются во Model
  - CartEventItemRemove — вызывается в Cart при удалении товара из корзины,
  - CartEventItemAdded — вызывается в Cart при добавлении товара в корзины,
  - CatalogEventItemAdded — вызывается в Catalog при добавлении товара в каталог,
  - OrderPaymentDetailsFilled — вызывается в Order, когда модальное окно с деталями отправки заполнено верно,
  - OrderContactsFilled — вызывается в Order, когда модальное окно с контактами покупателя заполнено верно, 
  - CartCleared — вызывается в Cart при очищении корзины после заказа, 
  - OrderContactsFilledFailed — вызывается в Order при неверном вводе данных, 
  - OrderPaymentDetailsFillFailed — вызывается в Order при неверном вводе данных,


- Связь в виде обработчиков между Model и View находится в index.ts

#### Описание моделей:

- Cart — класс обеспечивает управление товарами в корзине и взаимодействие с другими частями приложения через систему событий
  - items - поле хранит массив из выбранных продуктов
  - totalAmount - поле хранит общую сумму все выбранных продуктов
  - events - поле хранит менеджер событий
  - addItem метод добавления в корзину 
  - removeItem метод удаления из корзины
  - clearCart метод очищает корзину
  - _itemAdded защищенный метод, который вызывается с объектом продукта, он генерирует событие CartEventItemAdded
  - _itemRemove защищенный метод, который вызывается с объектом продукта, он генерирует событие CartEventItemRemove
  

- Catalog — класс обеспечивает управление товарами в каталоге и позволяет другим компонентам приложения реагировать на изменения в каталоге через систему событий.
  - items - поле хранит массив продуктов
  - events - поле хранит менеджер событий
  - getProduct метод получения продукта 
  - addItem метод добавления продукта
  - _itemAdded защищенный метод, который вызывается с объектом продукта, он генерирует событие CatalogEventItemAdded


- Order — класс обеспечивает удобное управление информацией о заказе и взаимодействие с другими компонентами через механизм событий.
  - payment - поле хранит html элемент модального окна 
  - email - поле хранит html элемент модального окна 
  - phone - поле хранит html элемент модального окна
  - address - поле хранит html элемент модального окна
  - total - поле хранит общую сумму покупки
  - events - поле хранит менеджер событий
  - fillPaymentDetails метод заполнения первого модального окна с информаций об адресе и способе оплаты
  - fillContactsDetails метод заполнения второго модального окна с информаций о телефоне и email пользователя
  - _paymentDetailsFilled защищенный метод, вызывается с деталями платежа и адресом, он создаёт событие OrderPaymentDetailsFilled
  - _paymentDetailsFilledFailed защищенный метод, вызывается при неудачном заполнении деталей платежа, он создаёт событие OrderPaymentDetailsFillFailed
  - _contactFilled защищенный метод, вызывается с деталями номера телефона и email, он создаёт событие OrderContactsFilled
  - _contactFilledFailed защищенный метод, вызывается при неудачном заполнении контактных данных, он создаёт событие OrderContactsFilledFailed

#### Описание представлений:
- CartItemView — класс обеспечивает создание и управление html-представлением продукта в корзине
  - container - поле хранит контейнер элемента корзины
  - title - поле хранит html элемент названия продукта.
  - price - поле хранит html элемент цены продукта.
  - метод render заполняет html и возвращает новый  


- ModalView - класс позволяет легко интегрировать и управлять модальными окнами в приложении, предоставляя методы для их отображения и скрытия, а также для обновления содержимого модальных окон.
  - modalContent - поле хранит контейнер для содержимого модального окна
  - container - поле хранит контейнер, который является основным контейнером модального окна
  - events - поле принимает менеджер событий
  - метод render заполняет html и возвращает новый


- CartView — класс обеспечивает создание и управление html-представлением корзины покупок
  - container - шаблон для отдельного элемента товара в корзине
  - itemTemplate - поле принимает template корзины 
  - title - поле хранит html элемент названия продукта.
  - price - поле хранит html элемент цены продукта.
  - orderButton - поле хранит html элемент кнопки заказа
  - basketList - поле хранит контейнер для списка товаров в корзине.
  - метод render для подготовки html элемента для отображения в корзине 
  

- CatalogItemView — класс обеспечивает создание и управление html-представлением продукта в каталоге
  - container - поле хранит контейнер элемента каталога
  - category - поле хранит html элемент категории продукта.
  - title - поле хранит html элемент названия продукта.
  - price - поле хранит html элемент цены продукта.
  - events - поле принимает менеджер событий
  - метод render заполняет html и возвращает новый
  

- CatalogProductView — класс обеспечивает создание и управление html-представлением детальной информации о продукте в модальном окне
  - container - поле хранит html элемент с содержимым модального окна  
  - category - поле хранит html элемент категории продукта.
  - title - поле хранит html элемент названия продукта.
  - price - поле хранит html элемент цены продукта.
  - text - поле хранит html элемент описания продукта.
  - button - поле хранит html элемент кнопки добавления в корзину
  - метод render заполняет html и возвращает новый
  

- CatalogView — класс обеспечивает управление отображением продуктов в каталоге
  - container - поле хранит html элемент контейнера каталога
  - метод render отображает элементы каталога 
  

- ContactsDetailsView — класс обеспечивает интерактивное управление контактными данными пользователя, включая валидацию, отображение ошибок и интеграцию с системой событий для обработки действий пользователя.
  - container - поле хранит html элемент с содержимым модального окна
  - events - поле принимает менеджер событий
  - email - поле хранит html элемени инпута email
  - emailError - элемент для отображения сообщения об ошибке, связанной с полем ввода электронной почты.
  - phone - поле хранит html элемени инпута phone
  - phoneError - элемент для отображения сообщения об ошибке, связанной с полем ввода номера телефона.
  - button - поле хранит html кнопки для отправки формы контактных данных.
  - метод enableButton удаляет атрибут 'disabled' с кнопки, делая её активной.
  - метод disableButton добавляет атрибут 'disabled' к кнопке, делая её неактивной.
  - метод clearCart очищает поля ввода email и phone, генерирует событие UiPaymentDetailsCleared и делает кнопку неактивной.
  - метод showError отображает сообщение об ошибке в соответствующем поле ввода
  - метод clearErrors удаляет элементы ошибок из DOM.
  - метод render для прослушивания отправки формы и события

  
- PaymentDetailsView — класс обеспечивает создание и управление html-представлением формы платежных данных
  - container - поле хранит html элемент с содержимым модального окна
  - address - поле  хранит html элемент адреса доставки
  - button - поле хранит html элемент кнопки для отправки формы деталей платежа
  - selectedPayment - переменная для хранения выбранного способа оплаты
  - events - поле принимает менеджер событий
  - render метод для прослушивания отправки формы и события
  

- SuccessfulSendingView — класс обеспечивает создание и управление html-представлением, информирующим пользователя об успешной отправке данных.
  - container - поле хранит html элемент с содержимым модального окна
  - button - хранить html элемент кнопки 
  - totalAmount - хранить html элемент общей сумму заказа 
  - render метод возвращает html элемент формы для последующего отображения 

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
